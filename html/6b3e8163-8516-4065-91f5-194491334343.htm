<html><head><meta http-equiv="X-UA-Compatible" content="IE=edge" /><link rel="shortcut icon" href="../icons/favicon.ico" /><link rel="stylesheet" type="text/css" href="../styles/branding.css" /><link rel="stylesheet" type="text/css" href="../styles/branding-zh-CN.css" /><script type="text/javascript" src="../scripts/branding.js"> </script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>代码段</title><meta name="Language" content="zh-cn" /><meta name="Microsoft.Help.Id" content="6b3e8163-8516-4065-91f5-194491334343" /><meta name="Description" content="本节简要说明 Rafy 框架中目前提供的所有代码段及使用方法。" /><meta name="Microsoft.Help.ContentType" content="Concepts" /><meta name="BrandingAware" content="true" /><link type="text/css" rel="stylesheet" href="../styles/highlight.css" /><script type="text/javascript" src="../scripts/highlight.js"> </script><link rel="stylesheet" type="text/css" href="../styles/branding-Website.css" /><script type="text/javascript" src="../scripts/jquery-1.11.0.min.js"></script><script type="text/javascript" src="../scripts/branding-Website.js"></script></head><body onload="OnLoad('cs')"><input type="hidden" id="userDataCache" class="userDataStyle" /><div class="pageHeader" id="PageHeader">Rafy User Guide<form id="SearchForm" method="get" action="#" onsubmit="javascript:TransferToSearchPage(); return false;"><input id="SearchTextBox" type="text" maxlength="200" /><button id="SearchButton" type="submit"></button></form></div><div class="pageBody"><div class="leftNav" id="leftNav"><div id="tocNav"><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="69b641cf-d1fe-4f06-877f-b479d268a3fc.htm" title="Rafy User Guide" tocid="roottoc">Rafy User Guide</a></div><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="69b641cf-d1fe-4f06-877f-b479d268a3fc.htm" title="Rafy框架" tocid="69b641cf-d1fe-4f06-877f-b479d268a3fc">Rafy框架</a></div><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="c8e6cd25-c674-4cd1-9880-816d11f58eb8.htm" title="领域实体框架" tocid="c8e6cd25-c674-4cd1-9880-816d11f58eb8">领域实体框架</a></div><div class="toclevel1" data-toclevel="1" data-childrenloaded="true"><a class="tocExpanded" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="2599e4bb-d313-4b78-892d-654f3e9acba8.htm" title="其它" tocid="2599e4bb-d313-4b78-892d-654f3e9acba8">其它</a></div><div class="toclevel2 current" data-toclevel="2"><a data-tochassubtree="false" href="6b3e8163-8516-4065-91f5-194491334343.htm" title="代码段" tocid="6b3e8163-8516-4065-91f5-194491334343">代码段</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="f4f5c2f5-638a-456a-9c8d-1e1854c63002.htm" title="Rafy 与经典 DDD 的关系" tocid="f4f5c2f5-638a-456a-9c8d-1e1854c63002">Rafy 与经典 DDD 的关系</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="50a5c6a3-1336-4ec3-8c6d-fedb0b93cc37.htm" title="常见问题(FAQ)" tocid="50a5c6a3-1336-4ec3-8c6d-fedb0b93cc37">常见问题(FAQ)</a></div></div><div id="tocResizableEW" onmousedown="OnMouseDown(event);"></div><div id="TocResize" class="tocResize"><img id="ResizeImageIncrease" src="../icons/TocOpen.gif" onclick="OnIncreaseToc()" alt="Click or drag to resize" title="Click or drag to resize" /><img id="ResizeImageReset" src="../icons/TocClose.gif" style="display:none" onclick="OnResetToc()" alt="Click or drag to resize" title="Click or drag to resize" /></div></div><div class="topicContent" id="TopicContent"><table class="titleTable"><tr><td class="titleColumn">代码段</td></tr></table><span class="introStyle"></span><div class="introduction"><p>本节简要说明 Rafy 框架中目前提供的所有代码段及使用方法。</p><p>This topic contains the following sections:</p><ul class="autoOutline"><li class="outlineSectionEntry"><a href="#des">说明</a></li><li class="outlineSectionEntry"><a href="#install">安装</a></li><li class="outlineSectionEntry"><a href="#property">属性代码段</a></li><li class="outlineSectionEntry"><a href="#other">其它代码段</a></li></ul></div><div class="collapsibleAreaRegion" id="des"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID0RB')" onkeypress="SectionExpandCollapse_CheckKey('ID0RB', event)" tabindex="0"><img id="ID0RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />说明</span></div><div id="ID0RBSection" class="collapsibleSection"><p>代码段是 VisualStudio 提供的辅助开发的功能。使用代码段可以方便地生成小段的代码。</p><p>Rafy 框架提供了大量的代码段，以方便日常开发。</p></div><div class="collapsibleAreaRegion" id="install"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID1RB')" onkeypress="SectionExpandCollapse_CheckKey('ID1RB', event)" tabindex="0"><img id="ID1RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />安装</span></div><div id="ID1RBSection" class="collapsibleSection"><p>安装 SDK 后，在 VisualStudio 菜单栏中点击 工具 -&gt; 安装/卸载代码段，在弹出窗口中点击确定即可。安装完成并重新启动 VisualStudio 后，代码段就会生效了。</p></div><div class="collapsibleAreaRegion" id="property"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID2RB')" onkeypress="SectionExpandCollapse_CheckKey('ID2RB', event)" tabindex="0"><img id="ID2RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />属性代码段</span></div><div id="ID2RBSection" class="collapsibleSection"><p>对于开发人最常写的属性代码，提供了以下代码段：</p><ul><li><p>Rafy_Property</p><p>用于编写实体的一般属性。</p></li><li><p>Rafy_Property_PropertyChanged</p><p>用于编写实体属性的变更后逻辑。</p><p>需要注意的是，这个代码段并不生成完整的属性代码，而是只生成差异部分。使用方法如下：</p><div class="mediaNear"><img alt="Snippets Property Changed Usage" src="../media/Snippets_PropertyChangedUsage.jpg" /></div></li><li><p>Rafy_Property_PropertyChanging</p><p>用于编写实体属性的变更前逻辑。使用方法同：Rafy_Property_PropertyChanged。</p></li><li><p>Rafy_Property_CoerceGetValue</p><p>用于编写实体属性的强制 Get 逻辑。使用方法同：Rafy_Property_PropertyChanged。</p></li><li><p>Rafy_PropertyLOB</p><p>用于编写实体的大对象属性。</p></li><li><p>Rafy_PropertyReadOnly</p><p>用于编写实体的只读属性。</p></li><li><p>Rafy_PropertyRedundancy</p><p>用于编写实体的冗余属性。</p></li><li><p>Rafy_PropertyReference</p><p>用于编写实体的引用属性。</p></li><li><p>Rafy_PropertyReferenceNullable</p><p>用于编写实体的可空引用属性。</p></li><li><p>Rafy_PropertyList</p><p>用于编写实体的组合子属性。</p></li><li><p>Rafy_PropertyList_Full</p><p>用于编写完整的实体的组合子属性。</p></li></ul><div class="alert"><table><tr><th><img src="../icons/AlertNote.png" alt="Note" /> Note</th></tr><tr><td><p>以上代码段都可以使用缩写来方便调用，例如，Rafy_PropertyReferenceNullable 只需要输入 RPR 即可。</p></td></tr></table></div></div><div class="collapsibleAreaRegion" id="other"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID4RB')" onkeypress="SectionExpandCollapse_CheckKey('ID4RB', event)" tabindex="0"><img id="ID4RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />其它代码段</span></div><div id="ID4RBSection" class="collapsibleSection"><ul><li><p>Rafy_Query</p><p>用于在仓库类中生成简单的查询方法。</p><div class="codeSnippetContainer"><div class="codeSnippetContainerTabs"><div id="ID3EAABAABAAA_tab1" class="codeSnippetContainerTabSingle">C#</div></div><div class="codeSnippetContainerCodeContainer"><div class="codeSnippetToolBar"><div class="codeSnippetToolBarText"><a id="ID3EAABAABAAA_copyCode" href="#" onclick="javascript:CopyToClipboard('ID3EAABAABAAA');return false;" title="Copy">Copy</a></div></div><div id="ID3EAABAABAAA_code_Div1" class="codeSnippetContainerCode" style="display: block"><pre xml:space="preserve"><span class="highlight-keyword">public</span> $EntityList$ $MethodName$(<span class="highlight-keyword">string</span> parameter1, <span class="highlight-keyword">int</span> parameter2)
{
    <span class="highlight-keyword">return</span> <span class="highlight-keyword">this</span>.FetchList(r =&gt; r.DA_$MethodName$(parameter1, parameter2));
}
<span class="highlight-keyword">private</span> EntityList DA_$MethodName$(<span class="highlight-keyword">string</span> parameter1, <span class="highlight-keyword">int</span> parameter2)
{
    <span class="highlight-keyword">var</span> q = <span class="highlight-keyword">this</span>.CreateLinqQuery();
    q = q.Where(e =&gt; e.Name == <span class="highlight-number">1</span>);
    <span class="highlight-keyword">return</span> <span class="highlight-keyword">this</span>.QueryList(q);
}</pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID3EAABAABAAA");</script></li><li><p>Rafy_Query_Match</p><p>用于在仓库类中生成一个用于精确匹配每一个属性的查询方法。</p></li></ul></div></div></div><div id="pageFooter" class="pageFooter">胡庆访 @版权所有，有问题请联系 9474649@qq.com。<div class="feedbackLink">有关这个主题的评论请发邮件到
        <a id="HT_MailLink" href="mailto:9474649%40qq.com?Subject=Rafy User Guide">发送反馈</a></div><script type="text/javascript">
        var HT_mailLink = document.getElementById("HT_MailLink");
        var HT_mailLinkText = HT_mailLink.innerHTML;
        HT_mailLink.href += ": " + document.title + "\u0026body=" + encodeURIComponent("Your feedback is used to improve the documentation and the product. Your e-mail address will not be used for any other purpose and is disposed of after the issue you report is resolved. While working to resolve the issue that you report, you may be contacted via e-mail to get further details or clarification on the feedback you sent. After the issue you report has been addressed, you may receive an e-mail to let you know that your feedback has been addressed.");
        HT_mailLink.innerHTML = HT_mailLinkText;
        </script></div></body></html>