<html><head><meta http-equiv="X-UA-Compatible" content="IE=edge" /><link rel="shortcut icon" href="../icons/favicon.ico" /><link rel="stylesheet" type="text/css" href="../styles/branding.css" /><link rel="stylesheet" type="text/css" href="../styles/branding-zh-CN.css" /><script type="text/javascript" src="../scripts/branding.js"> </script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>插件化架构</title><meta name="Language" content="zh-cn" /><meta name="Microsoft.Help.Id" content="15c790a6-8f5e-44aa-b8c3-74a955004a1e" /><meta name="Description" content="插件化架构是产品线可变性管理的基础。每一个独立的业务，都应该在一个单独的插件程序集内开发。" /><meta name="Microsoft.Help.ContentType" content="Concepts" /><meta name="BrandingAware" content="true" /><link type="text/css" rel="stylesheet" href="../styles/highlight.css" /><script type="text/javascript" src="../scripts/highlight.js"> </script><link rel="stylesheet" type="text/css" href="../styles/branding-Website.css" /><script type="text/javascript" src="../scripts/jquery-1.11.0.min.js"></script><script type="text/javascript" src="../scripts/branding-Website.js"></script></head><body onload="OnLoad('cs')"><input type="hidden" id="userDataCache" class="userDataStyle" /><div class="pageHeader" id="PageHeader">Rafy User Guide<form id="SearchForm" method="get" action="#" onsubmit="javascript:TransferToSearchPage(); return false;"><input id="SearchTextBox" type="text" maxlength="200" /><button id="SearchButton" type="submit"></button></form></div><div class="pageBody"><div class="leftNav" id="leftNav"><div id="tocNav"><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="69b641cf-d1fe-4f06-877f-b479d268a3fc.htm" title="Rafy User Guide" tocid="roottoc">Rafy User Guide</a></div><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="69b641cf-d1fe-4f06-877f-b479d268a3fc.htm" title="Rafy框架" tocid="69b641cf-d1fe-4f06-877f-b479d268a3fc">Rafy框架</a></div><div class="toclevel1" data-toclevel="1" data-childrenloaded="true"><a class="tocExpanded" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="3ebafad8-73e3-431f-9e49-9a0d9b23c786.htm" title="设计理念" tocid="3ebafad8-73e3-431f-9e49-9a0d9b23c786">设计理念</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="853673c9-7c40-4679-b139-a3e7e3cec8ef.htm" title="领域驱动设计" tocid="853673c9-7c40-4679-b139-a3e7e3cec8ef">领域驱动设计</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="e1014057-fd62-4810-8f1f-333d54564e91.htm" title="面向服务架构" tocid="e1014057-fd62-4810-8f1f-333d54564e91">面向服务架构</a></div><div class="toclevel2 current" data-toclevel="2"><a data-tochassubtree="false" href="15c790a6-8f5e-44aa-b8c3-74a955004a1e.htm" title="插件化架构" tocid="15c790a6-8f5e-44aa-b8c3-74a955004a1e">插件化架构</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="813981b5-3631-4d47-84ee-314aed1346ff.htm" title="模型驱动架构" tocid="813981b5-3631-4d47-84ee-314aed1346ff">模型驱动架构</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="946c540b-acb0-4531-b99c-85756cb69d4e.htm" title="产品线工程" tocid="946c540b-acb0-4531-b99c-85756cb69d4e">产品线工程</a></div></div><div id="tocResizableEW" onmousedown="OnMouseDown(event);"></div><div id="TocResize" class="tocResize"><img id="ResizeImageIncrease" src="../icons/TocOpen.gif" onclick="OnIncreaseToc()" alt="Click or drag to resize" title="Click or drag to resize" /><img id="ResizeImageReset" src="../icons/TocClose.gif" style="display:none" onclick="OnResetToc()" alt="Click or drag to resize" title="Click or drag to resize" /></div></div><div class="topicContent" id="TopicContent"><table class="titleTable"><tr><td class="titleColumn">插件化架构</td></tr></table><span class="introStyle"></span><div class="introduction"><p>插件化架构是产品线可变性管理的基础。每一个独立的业务，都应该在一个单独的插件程序集内开发。</p><div class="mediaNear"><img alt="Plugin Architecture" src="../media/Plugin_Architecture.png" /></div><p>本文包含以下章节：</p><ul class="autoOutline"><li class="outlineSectionEntry"><a href="#ca">插件的分类</a></li><li class="outlineSectionEntry"><a href="#install">插件的加载及启动顺序</a></li><li class="outlineSectionEntry"><a href="#pluCode">IPlugin 类型</a></li><li class="outlineSectionEntry"><a href="#lifeCycle">应用程序生命周期</a></li><li class="outlineSectionEntry"><a href="#other">其它</a></li></ul></div><div class="collapsibleAreaRegion" id="ca"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID0RB')" onkeypress="SectionExpandCollapse_CheckKey('ID0RB', event)" tabindex="0"><img id="ID0RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />插件的分类</span></div><div id="ID0RBSection" class="collapsibleSection"><p>插件分为领域插件和界面插件：领域插件中包含所涉及到的领域实体、领域服务；界面插件则包含需要显示的界面元素（界面插件又分两类：WPF 界面插件、Web 界面插件）。</p><ul><li><p>领域插件</p><p>
                            领域插件类型需要从 <span class="code">Rafy.DomainPlugin</span> 类继承。
                        </p></li><li><p>界面插件</p><p>
                            界面插件类型需要从 <span class="code">Rafy.UIPlugin</span> 类继承。
                        </p></li></ul></div><div class="collapsibleAreaRegion" id="install"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID2RB')" onkeypress="SectionExpandCollapse_CheckKey('ID2RB', event)" tabindex="0"><img id="ID2RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />插件的加载及启动顺序</span></div><div id="ID2RBSection" class="collapsibleSection"><p>
                    应用程序最终由多个插件构成，而每一个插件程序集，都会严格按照启动顺序进行加载。这是因为启动级别越高，重用级别越高。例如：主版本重用、部分版本重用、定制化这三种重用级别分别对应 <a href="946c540b-acb0-4531-b99c-85756cb69d4e.htm">产品线工程</a> 中的 721，所以应该把主版本重用的插件放在前面，定制化的插件放在后面。
                </p><p>一个开发完成的插件，要加载到主程序中，有两种方式：</p><ul><li><p>运行时加载方式</p><p>这是一般的插件加载方式，需要通过 app.config 中指定需要使用到的插件程序集，系统在启动时会自动加载该目录下的所有插件。</p><p>下面是 app.config 中的示例插件配置：</p><div class="codeSnippetContainer"><div class="codeSnippetContainerCodeContainer"><div class="codeSnippetToolBar"><div class="codeSnippetToolBarText"><a id="ID1EABBAAEAAA_copyCode" href="#" onclick="javascript:CopyToClipboard('ID1EABBAAEAAA');return false;" title="Copy">Copy</a></div></div><div id="ID1EABBAAEAAA_code_Div1" class="codeSnippetContainerCode" style="display: block"><pre xml:space="preserve"><span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">rafy</span> <span class="highlight-xml-attribute-name">currentCulture</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"zh-CN"</span> <span class="highlight-xml-attribute-name">collectDevLanguages</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"IsDebugging"</span><span class="highlight-xml-bracket">&gt;</span>
    <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">domainPlugins</span><span class="highlight-xml-bracket">&gt;</span>
        <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">add</span> <span class="highlight-xml-attribute-name">plugin</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"Rafy.Customization"</span><span class="highlight-xml-bracket">/&gt;</span>
        <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">add</span> <span class="highlight-xml-attribute-name">plugin</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"Rafy.DiskCaching"</span><span class="highlight-xml-bracket">/&gt;</span>
        <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">add</span> <span class="highlight-xml-attribute-name">plugin</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"Rafy.MultiLanguages"</span><span class="highlight-xml-bracket">/&gt;</span>
        <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">add</span> <span class="highlight-xml-attribute-name">plugin</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"Rafy.RBAC.Old"</span><span class="highlight-xml-bracket">/&gt;</span>
        <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">add</span> <span class="highlight-xml-attribute-name">plugin</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"JXC"</span><span class="highlight-xml-bracket">/&gt;</span>
    <span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">domainPlugins</span><span class="highlight-xml-bracket">&gt;</span>
    <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">uiPlugins</span><span class="highlight-xml-bracket">&gt;</span>
        <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">add</span> <span class="highlight-xml-attribute-name">plugin</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"Rafy.Customization.WPF"</span><span class="highlight-xml-bracket">/&gt;</span>
        <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">add</span> <span class="highlight-xml-attribute-name">plugin</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"Rafy.MultiLanguages.WPF"</span><span class="highlight-xml-bracket">/&gt;</span>
        <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">add</span> <span class="highlight-xml-attribute-name">plugin</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"Rafy.DevTools.WPF"</span><span class="highlight-xml-bracket">/&gt;</span>
        <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">add</span> <span class="highlight-xml-attribute-name">plugin</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"Rafy.RBAC.Old.WPF"</span><span class="highlight-xml-bracket">/&gt;</span>
        <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">add</span> <span class="highlight-xml-attribute-name">plugin</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"JXC.WPF"</span><span class="highlight-xml-bracket">/&gt;</span>
        <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">add</span> <span class="highlight-xml-attribute-name">plugin</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"Demo"</span><span class="highlight-xml-bracket">/&gt;</span>
    <span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">uiPlugins</span><span class="highlight-xml-bracket">&gt;</span>
<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">rafy</span><span class="highlight-xml-bracket">&gt;</span></pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID1EABBAAEAAA");</script><div class="alert"><table><tr><th><img src="../icons/AlertNote.png" alt="Note" /> Note</th></tr><tr><td><p>对于领域插件：如果是 C/S 程序，则客户端和服务端都需要部署。</p><p>对于界面插件：如果是 C/S 程序，只需要部署到客户端；如果是 Web 开发，只需要部署到网站目录中。</p></td></tr></table></div></li><li><p>程序加载方式</p><p>一些对于系统来说，必须加载的插件程序集，可以使用程序加载方式。这种方式只需要在程序启动时，通过集合添加指定的插件即可。以下代码强制加载 JXCPlugin 插件：</p><p>另外，如果使用代码加载的方式，那么集合中的顺序则表示了插件的启动顺序。如下：</p><div class="codeSnippetContainer"><div class="codeSnippetContainerTabs"><div id="ID1EAAAAAEAAA_tab1" class="codeSnippetContainerTabSingle">C#</div></div><div class="codeSnippetContainerCodeContainer"><div class="codeSnippetToolBar"><div class="codeSnippetToolBarText"><a id="ID1EAAAAAEAAA_copyCode" href="#" onclick="javascript:CopyToClipboard('ID1EAAAAAEAAA');return false;" title="Copy">Copy</a></div></div><div id="ID1EAAAAAEAAA_code_Div1" class="codeSnippetContainerCode" style="display: block"><pre xml:space="preserve"><span class="highlight-keyword">class</span> DBIWebApp : DomainApp
{
    <span class="highlight-keyword">protected</span> <span class="highlight-keyword">override</span> <span class="highlight-keyword">void</span> InitEnvironment()
    {
        RafyEnvironment.DomainPlugins.Add(<span class="highlight-keyword">new</span> StampPlugin());
        RafyEnvironment.DomainPlugins.Add(<span class="highlight-keyword">new</span> EntityPhantomPlugin());
        RafyEnvironment.DomainPlugins.Add(<span class="highlight-keyword">new</span> AccountsPlugin());
        RafyEnvironment.DomainPlugins.Add(<span class="highlight-keyword">new</span> RBACPlugin());
        RafyEnvironment.DomainPlugins.Add(<span class="highlight-keyword">new</span> WFPlugin());
        RafyEnvironment.DomainPlugins.Add(<span class="highlight-keyword">new</span> DBIPlugin());
        RafyEnvironment.DomainPlugins.Add(<span class="highlight-keyword">new</span> VATEnginePlugin());
    }
}</pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID1EAAAAAEAAA");</script></li></ul></div><div class="collapsibleAreaRegion" id="pluCode"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID3RB')" onkeypress="SectionExpandCollapse_CheckKey('ID3RB', event)" tabindex="0"><img id="ID3RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />IPlugin 类型</span></div><div id="ID3RBSection" class="collapsibleSection"><p>在 Rafy 中，每个插件由一个单独的程序集来表示。而每个插件程序集中，必须有唯一一个插件类型，该类必须实现 IPlugin 接口：</p><div class="codeSnippetContainer"><div class="codeSnippetContainerTabs"><div id="ID1EAAADAAA_tab1" class="codeSnippetContainerTabSingle">C#</div></div><div class="codeSnippetContainerCodeContainer"><div class="codeSnippetToolBar"><div class="codeSnippetToolBarText"><a id="ID1EAAADAAA_copyCode" href="#" onclick="javascript:CopyToClipboard('ID1EAAADAAA');return false;" title="Copy">Copy</a></div></div><div id="ID1EAAADAAA_code_Div1" class="codeSnippetContainerCode" style="display: block"><pre xml:space="preserve"><span class="highlight-keyword">namespace</span> Rafy
{
    <span class="highlight-comment">/// &lt;summary&gt;</span>
    <span class="highlight-comment">/// 插件定义。</span>
    <span class="highlight-comment">/// &lt;/summary&gt;</span>
    <span class="highlight-keyword">public</span> <span class="highlight-keyword">interface</span> IPlugin
    {
        <span class="highlight-comment">/// &lt;summary&gt;</span>
        <span class="highlight-comment">/// 插件的初始化方法。</span>
        <span class="highlight-comment">/// 框架会在启动时根据启动级别顺序调用本方法。</span>
        <span class="highlight-comment">/// </span>
        <span class="highlight-comment">/// 方法有两个职责：</span>
        <span class="highlight-comment">/// 1.依赖注入。</span>
        <span class="highlight-comment">/// 2.注册 app 生命周期中事件，进行特定的初始化工作。</span>
        <span class="highlight-comment">/// &lt;/summary&gt;</span>
        <span class="highlight-comment">/// &lt;param name="app"&gt;应用程序对象。&lt;/param&gt;</span>
        <span class="highlight-keyword">void</span> Initialize(IApp app);
    }
}</pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID1EAAADAAA");</script></div><div class="collapsibleAreaRegion" id="lifeCycle"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID4RB')" onkeypress="SectionExpandCollapse_CheckKey('ID4RB', event)" tabindex="0"><img id="ID4RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />应用程序生命周期</span></div><div id="ID4RBSection" class="collapsibleSection"><p>插件的 Initialize 方法会在启动时根据启动级别顺序被调用。在该方法中，需要注册 app 生命周期中事件，进行特定的初始化工作。以下代码示例如果在运行时启动时，自动升级数据库：</p><div class="codeSnippetContainer"><div class="codeSnippetContainerTabs"><div id="ID1EACACAAA_tab1" class="codeSnippetContainerTabSingle">C#</div></div><div class="codeSnippetContainerCodeContainer"><div class="codeSnippetToolBar"><div class="codeSnippetToolBarText"><a id="ID1EACACAAA_copyCode" href="#" onclick="javascript:CopyToClipboard('ID1EACACAAA');return false;" title="Copy">Copy</a></div></div><div id="ID1EACACAAA_code_Div1" class="codeSnippetContainerCode" style="display: block"><pre xml:space="preserve"><span class="highlight-keyword">public</span> <span class="highlight-keyword">class</span> JXCPlugin : DomainPlugin
{
    <span class="highlight-keyword">public</span> <span class="highlight-keyword">override</span> <span class="highlight-keyword">void</span> Initialize(IApp app)
    {
        <span class="highlight-comment">//在运行时启动时，自动升级数据库。</span>
        app.RuntimeStarting += (o, e) =&gt; AutoUpdateDb();
    }

    <span class="highlight-comment">/// &lt;summary&gt;</span>
    <span class="highlight-comment">/// 自动升级数据库。</span>
    <span class="highlight-comment">/// &lt;/summary&gt;</span>
    <span class="highlight-keyword">private</span> <span class="highlight-keyword">static</span> <span class="highlight-keyword">void</span> AutoUpdateDb()
    {
        <span class="highlight-comment">//...</span>
    }
}</pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID1EACACAAA");</script><p>IApp 应用程序对象的生命周期如下：</p><div class="codeSnippetContainer"><div class="codeSnippetContainerTabs"><div id="ID1EAAACAAA_tab1" class="codeSnippetContainerTabSingle">C#</div></div><div class="codeSnippetContainerCodeContainer"><div class="codeSnippetToolBar"><div class="codeSnippetToolBarText"><a id="ID1EAAACAAA_copyCode" href="#" onclick="javascript:CopyToClipboard('ID1EAAACAAA');return false;" title="Copy">Copy</a></div></div><div id="ID1EAAACAAA_code_Div1" class="codeSnippetContainerCode" style="display: block"><pre xml:space="preserve"><span class="highlight-comment">/// &lt;summary&gt;</span>
<span class="highlight-comment">/// 应用程序生成周期定义</span>
<span class="highlight-comment">/// &lt;/summary&gt;</span>
<span class="highlight-keyword">public</span> <span class="highlight-keyword">interface</span> IApp
{
    <span class="highlight-comment">/// &lt;summary&gt;</span>
    <span class="highlight-comment">/// 所有实体元数据初始化完毕，包括实体元数据之间的关系。</span>
    <span class="highlight-comment">/// &lt;/summary&gt;</span>
    <span class="highlight-keyword">event</span> EventHandler AllPluginsIntialized;

    <span class="highlight-comment">/// &lt;summary&gt;</span>
    <span class="highlight-comment">/// 所有初始化期定义的元数据初始化完成时事件。</span>
    <span class="highlight-comment">/// &lt;/summary&gt;</span>
    <span class="highlight-keyword">event</span> EventHandler MetaCompiled;

    <span class="highlight-comment">/// &lt;summary&gt;</span>
    <span class="highlight-comment">/// 模块的定义先于其它模型的操作。这样可以先设置好模板默认的按钮。</span>
    <span class="highlight-comment">/// &lt;/summary&gt;</span>
    <span class="highlight-keyword">event</span> EventHandler ModuleOperations;

    <span class="highlight-comment">/// &lt;summary&gt;</span>
    <span class="highlight-comment">/// 模块的定义完成</span>
    <span class="highlight-comment">/// &lt;/summary&gt;</span>
    <span class="highlight-keyword">event</span> EventHandler ModuleOperationsCompleted;

    <span class="highlight-comment">/// &lt;summary&gt;</span>
    <span class="highlight-comment">/// 所有初始化工作完成</span>
    <span class="highlight-comment">/// &lt;/summary&gt;</span>
    <span class="highlight-keyword">event</span> EventHandler AppModelCompleted;

    <span class="highlight-comment">/// &lt;summary&gt;</span>
    <span class="highlight-comment">/// 应用程序运行时行为开始。</span>
    <span class="highlight-comment">/// &lt;/summary&gt;</span>
    <span class="highlight-keyword">event</span> EventHandler RuntimeStarting;

    <span class="highlight-comment">/// &lt;summary&gt;</span>
    <span class="highlight-comment">/// AppStartup 完毕</span>
    <span class="highlight-comment">/// &lt;/summary&gt;</span>
    <span class="highlight-keyword">event</span> EventHandler StartupCompleted;

    <span class="highlight-comment">/// &lt;summary&gt;</span>
    <span class="highlight-comment">/// 应用程序完全退出</span>
    <span class="highlight-comment">/// &lt;/summary&gt;</span>
    <span class="highlight-keyword">event</span> EventHandler Exit;

    <span class="highlight-comment">/// &lt;summary&gt;</span>
    <span class="highlight-comment">/// 主过程开始前事件。</span>
    <span class="highlight-comment">/// &lt;/summary&gt;</span>
    <span class="highlight-keyword">event</span> EventHandler MainProcessStarting;

    <span class="highlight-comment">/// &lt;summary&gt;</span>
    <span class="highlight-comment">/// 关闭应用程序</span>
    <span class="highlight-comment">/// &lt;/summary&gt;</span>
    <span class="highlight-keyword">void</span> Shutdown();
}</pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID1EAAACAAA");</script></div><div class="collapsibleAreaRegion" id="other"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID5RB')" onkeypress="SectionExpandCollapse_CheckKey('ID5RB', event)" tabindex="0"><img id="ID5RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />其它</span></div><div id="ID5RBSection" class="collapsibleSection"><p>
                    关于插件生命周期的设计，参见：<a href="http://www.cnblogs.com/zgynhqf/archive/2011/02/22/1961081.html" target="_blank">使用“管道”与“应用程序生命周期”重构：可插拔模块</a>。
                </p></div></div></div><div id="pageFooter" class="pageFooter">有问题请联系 9474649@qq.com。<div class="feedbackLink">有关这个主题的评论请发邮件到
        <a id="HT_MailLink" href="mailto:9474649%40qq.com?Subject=Rafy User Guide">发送反馈</a></div><script type="text/javascript">
        var HT_mailLink = document.getElementById("HT_MailLink");
        var HT_mailLinkText = HT_mailLink.innerHTML;
        HT_mailLink.href += ": " + document.title + "\u0026body=" + encodeURIComponent("Your feedback is used to improve the documentation and the product. Your e-mail address will not be used for any other purpose and is disposed of after the issue you report is resolved. While working to resolve the issue that you report, you may be contacted via e-mail to get further details or clarification on the feedback you sent. After the issue you report has been addressed, you may receive an e-mail to let you know that your feedback has been addressed.");
        HT_mailLink.innerHTML = HT_mailLinkText;
        </script></div></body></html>