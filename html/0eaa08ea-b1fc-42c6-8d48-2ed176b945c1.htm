<html><head><meta http-equiv="X-UA-Compatible" content="IE=edge" /><link rel="shortcut icon" href="../icons/favicon.ico" /><link rel="stylesheet" type="text/css" href="../styles/branding.css" /><link rel="stylesheet" type="text/css" href="../styles/branding-zh-CN.css" /><script type="text/javascript" src="../scripts/branding.js"> </script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>冗余属性</title><meta name="Language" content="zh-cn" /><meta name="Microsoft.Help.Id" content="0eaa08ea-b1fc-42c6-8d48-2ed176b945c1" /><meta name="Description" content="在开发数据库应用程序时，开发人员常常会把关联表中的一些字段冗余在另一张表中，这样可以减少关联查询，优化查询效率。" /><meta name="Microsoft.Help.ContentType" content="Concepts" /><meta name="BrandingAware" content="true" /><link type="text/css" rel="stylesheet" href="../styles/highlight.css" /><script type="text/javascript" src="../scripts/highlight.js"> </script><link rel="stylesheet" type="text/css" href="../styles/branding-Website.css" /><script type="text/javascript" src="../scripts/jquery-1.11.0.min.js"></script><script type="text/javascript" src="../scripts/branding-Website.js"></script></head><body onload="OnLoad('cs')"><input type="hidden" id="userDataCache" class="userDataStyle" /><div class="pageHeader" id="PageHeader">Rafy User Guide<form id="SearchForm" method="get" action="#" onsubmit="javascript:TransferToSearchPage(); return false;"><input id="SearchTextBox" type="text" maxlength="200" /><button id="SearchButton" type="submit"></button></form></div><div class="pageBody"><div class="leftNav" id="leftNav"><div id="tocNav"><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="69b641cf-d1fe-4f06-877f-b479d268a3fc.htm" title="Rafy User Guide" tocid="roottoc">Rafy User Guide</a></div><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="69b641cf-d1fe-4f06-877f-b479d268a3fc.htm" title="Rafy框架" tocid="69b641cf-d1fe-4f06-877f-b479d268a3fc">Rafy框架</a></div><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="c8e6cd25-c674-4cd1-9880-816d11f58eb8.htm" title="领域实体框架" tocid="c8e6cd25-c674-4cd1-9880-816d11f58eb8">领域实体框架</a></div><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="e9998e68-31e8-47d6-9e28-829aade5044e.htm" title="领域实体" tocid="e9998e68-31e8-47d6-9e28-829aade5044e">领域实体</a></div><div class="toclevel1" data-toclevel="1" data-childrenloaded="true"><a class="tocExpanded" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="8c0065bc-f165-4c69-81f4-9c3c57bd9ab9.htm" title="实体属性" tocid="8c0065bc-f165-4c69-81f4-9c3c57bd9ab9">实体属性</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="3ad175ff-a917-4e84-931f-f845285187ed.htm" title="一般属性" tocid="3ad175ff-a917-4e84-931f-f845285187ed">一般属性</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="bae4aeb4-e6a9-4d1f-9bbd-1a4199303ba5.htm" title="引用属性" tocid="bae4aeb4-e6a9-4d1f-9bbd-1a4199303ba5">引用属性</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="770d700d-acf8-40fd-abc2-a580725a14fb.htm" title="组合子属性" tocid="770d700d-acf8-40fd-abc2-a580725a14fb">组合子属性</a></div><div class="toclevel2 current" data-toclevel="2"><a data-tochassubtree="false" href="0eaa08ea-b1fc-42c6-8d48-2ed176b945c1.htm" title="冗余属性" tocid="0eaa08ea-b1fc-42c6-8d48-2ed176b945c1">冗余属性</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="8120fc14-ef61-43cd-99a5-21c6edd5d38b.htm" title="大数据属性" tocid="8120fc14-ef61-43cd-99a5-21c6edd5d38b">大数据属性</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="711304c2-d2a3-4ec9-abd8-00edd86fb3ca.htm" title="只读属性" tocid="711304c2-d2a3-4ec9-abd8-00edd86fb3ca">只读属性</a></div></div><div id="tocResizableEW" onmousedown="OnMouseDown(event);"></div><div id="TocResize" class="tocResize"><img id="ResizeImageIncrease" src="../icons/TocOpen.gif" onclick="OnIncreaseToc()" alt="Click or drag to resize" title="Click or drag to resize" /><img id="ResizeImageReset" src="../icons/TocClose.gif" style="display:none" onclick="OnResetToc()" alt="Click or drag to resize" title="Click or drag to resize" /></div></div><div class="topicContent" id="TopicContent"><table class="titleTable"><tr><td class="titleColumn">冗余属性</td></tr></table><span class="introStyle"></span><div class="introduction"><p>本文包含以下章节：</p><ul class="autoOutline"><li class="outlineSectionEntry"><a href="#des">说明</a></li><li class="outlineSectionEntry"><a href="#exap">代码示例</a></li></ul></div><div class="collapsibleAreaRegion" id="des"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID0RB')" onkeypress="SectionExpandCollapse_CheckKey('ID0RB', event)" tabindex="0"><img id="ID0RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />说明</span></div><div id="ID0RBSection" class="collapsibleSection"><p>在开发数据库应用程序时，开发人员常常会把关联表中的一些字段冗余在另一张表中，这样可以减少关联查询，优化查询效率。</p><p>冗余属性是以框架的方式，来实现这种轻量级的数据冗余，以减少关联查询次数及网络数据传输量，提高应用程序性能。</p><p>冗余属性提供了一种易用的机制，把指定冗余路径的关联实体对象中的属性值永久复制到本对象中，以解决关联查询、关联数据量等性能问题。应用开发人员只需要简单的定义一个冗余属性，而框架会自动完成对冗余属性的赋值、更新操作。</p><p>
                    详情说明，参见：
                    <a href="http://www.cnblogs.com/zgynhqf/archive/2012/08/10/2633047.html" target="_blank">《ORM 框架中的冗余属性设计》</a></p></div><div class="collapsibleAreaRegion" id="exap"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID2RB')" onkeypress="SectionExpandCollapse_CheckKey('ID2RB', event)" tabindex="0"><img id="ID2RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />代码示例</span></div><div id="ID2RBSection" class="collapsibleSection"><p>
                    以下代码为 Warehouse （仓库）类声明了一个名称为 AdministratorName 的冗余属性。这个属性把 Warehouse.Administrator.Name 的值冗余到 Warehouse 实体中。
                </p><div class="codeSnippetContainer"><div class="codeSnippetContainerTabs"><div id="ID1EACABAAA_tab1" class="codeSnippetContainerTabSingle">属性声明示例</div></div><div class="codeSnippetContainerCodeContainer"><div class="codeSnippetToolBar"><div class="codeSnippetToolBarText"><a id="ID1EACABAAA_copyCode" href="#" onclick="javascript:CopyToClipboard('ID1EACABAAA');return false;" title="Copy">Copy</a></div></div><div id="ID1EACABAAA_code_Div1" class="codeSnippetContainerCode" style="display: block"><pre xml:space="preserve"><span class="highlight-keyword">public</span> <span class="highlight-keyword">static</span> <span class="highlight-keyword">readonly</span> Property&lt;<span class="highlight-keyword">string</span>&gt; AdministratorNameProperty = P&lt;Warehouse&gt;.RegisterRedundancy(e =&gt; e.AdministratorName,
    <span class="highlight-keyword">new</span> RedundantPath(AdministratorProperty, User.NameProperty));
<span class="highlight-keyword">public</span> <span class="highlight-keyword">string</span> AdministratorName
{
    <span class="highlight-keyword">get</span> { <span class="highlight-keyword">return</span> <span class="highlight-keyword">this</span>.GetProperty(AdministratorNameProperty); }
}</pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID1EACABAAA");</script><p>特点</p><ul><li><p>声明冗余属性时，需要声明出完整的冗余路径。冗余路径由一串实体属性组成：一个以上的引用属性 + 一个一般值属性。冗余路径说明了需要把当前对象引用的某个对象的值冗余到本对象中。</p></li><li><p>只读：冗余属性是只读的，不能直接设置冗余属性值，由框架本身来维护冗余属性的值。当改变路径中任意一个引用对象、或者路径终点的属性的值时，冗余属性值自动更新。</p></li><li><p>冗余属性需要映射到数据库中，否则不能起到优化查询性能的作用。</p></li></ul></div></div></div><div id="pageFooter" class="pageFooter">有问题请联系 9474649@qq.com。<div class="feedbackLink">有关这个主题的评论请发邮件到
        <a id="HT_MailLink" href="mailto:9474649%40qq.com?Subject=Rafy User Guide">发送反馈</a></div><script type="text/javascript">
        var HT_mailLink = document.getElementById("HT_MailLink");
        var HT_mailLinkText = HT_mailLink.innerHTML;
        HT_mailLink.href += ": " + document.title + "\u0026body=" + encodeURIComponent("Your feedback is used to improve the documentation and the product. Your e-mail address will not be used for any other purpose and is disposed of after the issue you report is resolved. While working to resolve the issue that you report, you may be contacted via e-mail to get further details or clarification on the feedback you sent. After the issue you report has been addressed, you may receive an e-mail to let you know that your feedback has been addressed.");
        HT_mailLink.innerHTML = HT_mailLinkText;
        </script></div></body></html>