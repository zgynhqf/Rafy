<html><head><meta http-equiv="X-UA-Compatible" content="IE=edge" /><link rel="shortcut icon" href="../icons/favicon.ico" /><link rel="stylesheet" type="text/css" href="../styles/branding.css" /><link rel="stylesheet" type="text/css" href="../styles/branding-zh-CN.css" /><script type="text/javascript" src="../scripts/branding.js"> </script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>大数据属性</title><meta name="Language" content="zh-cn" /><meta name="Microsoft.Help.Id" content="8120fc14-ef61-43cd-99a5-21c6edd5d38b" /><meta name="Description" content="更新或者读取数据时，传统的数据库访问方式可以只读取或者更新数据表中部分需要的字段即可，但是 ORM 框架一般是以实体对象的方式，来更新或者读取全部字段的数据。这样会有一定的性能问题。尤其在某些字段中的数据比较大的时候，性能问题更加严重，例如某个字段存储的是一张图片，又如存储文章内容的大字符串字段。" /><meta name="Microsoft.Help.ContentType" content="Concepts" /><meta name="BrandingAware" content="true" /><link type="text/css" rel="stylesheet" href="../styles/highlight.css" /><script type="text/javascript" src="../scripts/highlight.js"> </script><link rel="stylesheet" type="text/css" href="../styles/branding-Website.css" /><script type="text/javascript" src="../scripts/jquery-1.11.0.min.js"></script><script type="text/javascript" src="../scripts/branding-Website.js"></script></head><body onload="OnLoad('cs')"><input type="hidden" id="userDataCache" class="userDataStyle" /><div class="pageHeader" id="PageHeader">Rafy User Guide<form id="SearchForm" method="get" action="#" onsubmit="javascript:TransferToSearchPage(); return false;"><input id="SearchTextBox" type="text" maxlength="200" /><button id="SearchButton" type="submit"></button></form></div><div class="pageBody"><div class="leftNav" id="leftNav"><div id="tocNav"><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="69b641cf-d1fe-4f06-877f-b479d268a3fc.htm" title="Rafy User Guide" tocid="roottoc">Rafy User Guide</a></div><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="69b641cf-d1fe-4f06-877f-b479d268a3fc.htm" title="Rafy框架" tocid="69b641cf-d1fe-4f06-877f-b479d268a3fc">Rafy框架</a></div><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="c8e6cd25-c674-4cd1-9880-816d11f58eb8.htm" title="领域实体框架" tocid="c8e6cd25-c674-4cd1-9880-816d11f58eb8">领域实体框架</a></div><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="e9998e68-31e8-47d6-9e28-829aade5044e.htm" title="领域实体" tocid="e9998e68-31e8-47d6-9e28-829aade5044e">领域实体</a></div><div class="toclevel1" data-toclevel="1" data-childrenloaded="true"><a class="tocExpanded" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="8c0065bc-f165-4c69-81f4-9c3c57bd9ab9.htm" title="实体属性" tocid="8c0065bc-f165-4c69-81f4-9c3c57bd9ab9">实体属性</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="3ad175ff-a917-4e84-931f-f845285187ed.htm" title="一般属性" tocid="3ad175ff-a917-4e84-931f-f845285187ed">一般属性</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="bae4aeb4-e6a9-4d1f-9bbd-1a4199303ba5.htm" title="引用属性" tocid="bae4aeb4-e6a9-4d1f-9bbd-1a4199303ba5">引用属性</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="770d700d-acf8-40fd-abc2-a580725a14fb.htm" title="组合子属性" tocid="770d700d-acf8-40fd-abc2-a580725a14fb">组合子属性</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="0eaa08ea-b1fc-42c6-8d48-2ed176b945c1.htm" title="冗余属性" tocid="0eaa08ea-b1fc-42c6-8d48-2ed176b945c1">冗余属性</a></div><div class="toclevel2 current" data-toclevel="2"><a data-tochassubtree="false" href="8120fc14-ef61-43cd-99a5-21c6edd5d38b.htm" title="大数据属性" tocid="8120fc14-ef61-43cd-99a5-21c6edd5d38b">大数据属性</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="711304c2-d2a3-4ec9-abd8-00edd86fb3ca.htm" title="只读属性" tocid="711304c2-d2a3-4ec9-abd8-00edd86fb3ca">只读属性</a></div></div><div id="tocResizableEW" onmousedown="OnMouseDown(event);"></div><div id="TocResize" class="tocResize"><img id="ResizeImageIncrease" src="../icons/TocOpen.gif" onclick="OnIncreaseToc()" alt="Click or drag to resize" title="Click or drag to resize" /><img id="ResizeImageReset" src="../icons/TocClose.gif" style="display:none" onclick="OnResetToc()" alt="Click or drag to resize" title="Click or drag to resize" /></div></div><div class="topicContent" id="TopicContent"><table class="titleTable"><tr><td class="titleColumn">大数据属性</td></tr></table><span class="introStyle"></span><div class="introduction"><p>本文包含以下章节：</p><ul class="autoOutline"><li class="outlineSectionEntry"><a href="#des">说明</a></li><li class="outlineSectionEntry"><a href="#exap">代码示例</a></li></ul></div><div class="collapsibleAreaRegion" id="des"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID0RB')" onkeypress="SectionExpandCollapse_CheckKey('ID0RB', event)" tabindex="0"><img id="ID0RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />说明</span></div><div id="ID0RBSection" class="collapsibleSection"><p>更新或者读取数据时，传统的数据库访问方式可以只读取或者更新数据表中部分需要的字段即可，但是 ORM 框架一般是以实体对象的方式，来更新或者读取全部字段的数据。这样会有一定的性能问题。尤其在某些字段中的数据比较大的时候，性能问题更加严重，例如某个字段存储的是一张图片，又如存储文章内容的大字符串字段。</p><p>Rafy 框架提供了“大数据属性”，它很好地处理了上述问题。例如，Article（文章）类中的 Content（文章内容）属性存储的是一篇文章的完整内容。当我们在显示一个文章的列表时，往往只需要显示文章的标题就可以了，不需要同时加载文章内容字段。如果把该属性设置为大数据属性时：</p><ul><li><p>懒加载：当需要使用内容时，框架才会从数据库中加载该属性的值。</p></li><li><p>按需更新：当更新数据库时，只有对 Article 的 Content 属性变更后，对应的 Sql 更新语句中才会更新该字段。</p></li></ul></div><div class="collapsibleAreaRegion" id="exap"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID2RB')" onkeypress="SectionExpandCollapse_CheckKey('ID2RB', event)" tabindex="0"><img id="ID2RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />代码示例</span></div><div id="ID2RBSection" class="collapsibleSection"><p>
                    以下代码为 Article （文章）类声明了一个名称为 Content（内容）的冗余属性。
                </p><div class="codeSnippetContainer"><div class="codeSnippetContainerTabs"><div id="ID1EAAABAAA_tab1" class="codeSnippetContainerTabSingle">属性声明示例</div></div><div class="codeSnippetContainerCodeContainer"><div class="codeSnippetToolBar"><div class="codeSnippetToolBarText"><a id="ID1EAAABAAA_copyCode" href="#" onclick="javascript:CopyToClipboard('ID1EAAABAAA');return false;" title="Copy">Copy</a></div></div><div id="ID1EAAABAAA_code_Div1" class="codeSnippetContainerCode" style="display: block"><pre xml:space="preserve"><span class="highlight-keyword">public</span> <span class="highlight-keyword">static</span> <span class="highlight-keyword">readonly</span> LOBProperty&lt;<span class="highlight-keyword">string</span>&gt; ContentProperty = P&lt;Article&gt;.RegisterLOB(e =&gt; e.Content);
<span class="highlight-keyword">public</span> <span class="highlight-keyword">string</span> Content
{
    <span class="highlight-keyword">get</span> { <span class="highlight-keyword">return</span> <span class="highlight-keyword">this</span>.GetLOBProperty(ContentProperty); }
    <span class="highlight-keyword">set</span> { <span class="highlight-keyword">this</span>.SetLOBProperty(ContentProperty, <span class="highlight-keyword">value</span>); }
}</pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID1EAAABAAA");</script></div></div></div><div id="pageFooter" class="pageFooter">有问题请联系 9474649@qq.com。<div class="feedbackLink">有关这个主题的评论请发邮件到
        <a id="HT_MailLink" href="mailto:9474649%40qq.com?Subject=Rafy User Guide">发送反馈</a></div><script type="text/javascript">
        var HT_mailLink = document.getElementById("HT_MailLink");
        var HT_mailLinkText = HT_mailLink.innerHTML;
        HT_mailLink.href += ": " + document.title + "\u0026body=" + encodeURIComponent("Your feedback is used to improve the documentation and the product. Your e-mail address will not be used for any other purpose and is disposed of after the issue you report is resolved. While working to resolve the issue that you report, you may be contacted via e-mail to get further details or clarification on the feedback you sent. After the issue you report has been addressed, you may receive an e-mail to let you know that your feedback has been addressed.");
        HT_mailLink.innerHTML = HT_mailLinkText;
        </script></div></body></html>